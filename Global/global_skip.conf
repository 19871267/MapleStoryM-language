# Shadowrocket: 2019-05-25 14:26:37
[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlytics.com, captive.apple.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
dns-server = system
ipv6 = false


[Rule]
DOMAIN,baidu.com,DIRECT,script-filter
DOMAIN-KEYWORD,google,PROXY,force-remote-dns
DOMAIN-KEYWORD,facebook,PROXY,force-remote-dns
DOMAIN-KEYWORD,youtube,PROXY,force-remote-dns
DOMAIN-KEYWORD,twitter,PROXY,force-remote-dns
DOMAIN-KEYWORD,instagram,PROXY,force-remote-dns
DOMAIN-KEYWORD,gmail,PROXY,force-remote-dns
DOMAIN-SUFFIX,twimg.com,PROXY,force-remote-dns
DOMAIN-SUFFIX,t.co,PROXY,force-remote-dns
DOMAIN-SUFFIX,kenengba.com,PROXY,force-remote-dns
DOMAIN-SUFFIX,akamai.net,PROXY,force-remote-dns
DOMAIN-SUFFIX,whatsapp.net,PROXY,force-remote-dns
DOMAIN-SUFFIX,whatsapp.com,PROXY,force-remote-dns
DOMAIN-SUFFIX,snapchat.com,PROXY,force-remote-dns
DOMAIN-KEYWORD,pixiv,PROXY
DOMAIN-SUFFIX,google.cn,DIRECT
DOMAIN-SUFFIX,fb.com,PROXY
DOMAIN-SUFFIX,apple.com,DIRECT
DOMAIN-SUFFIX,mzstatic.com,PROXY
DOMAIN-SUFFIX,itunes.com,PROXY
DOMAIN-SUFFIX,icloud.com,DIRECT
DOMAIN-SUFFIX,icloud-content.com,DIRECT
DOMAIN-SUFFIX,lcdn-registration.apple.com,DIRECT
DOMAIN-KEYWORD,flurry.co,REJECT
DOMAIN-SUFFIX,doubleclick.net,REJECT
DOMAIN,bam.nr-data.net,REJECT
DOMAIN,counter.kingsoft.com,REJECT
DOMAIN,js-agent.newrelic.com,REJECT
DOMAIN,pixel.wp.com,REJECT
DOMAIN-SUFFIX,adjust.com,REJECT
DOMAIN-SUFFIX,cmcore.com,REJECT
DOMAIN-SUFFIX,coremetrics.com,REJECT
DOMAIN-SUFFIX,flurry.com,REJECT
DOMAIN-SUFFIX,irs01.com,REJECT
DOMAIN-SUFFIX,madmini.com,REJECT
DOMAIN-SUFFIX,mixpanel.com,REJECT
DOMAIN-SUFFIX,wrating.com,REJECT
DOMAIN-SUFFIX,admaster.com.cn,REJECT
DOMAIN-SUFFIX,51.la,REJECT
DOMAIN-SUFFIX,acs86.com,REJECT
DOMAIN-SUFFIX,adchina.com,REJECT
DOMAIN-SUFFIX,adcome.cn,REJECT
DOMAIN-SUFFIX,adinfuse.com,REJECT
DOMAIN-SUFFIX,admob.com,REJECT
DOMAIN-SUFFIX,adsage.cn,REJECT
DOMAIN-SUFFIX,adsage.com,REJECT
DOMAIN-SUFFIX,adsmogo.org,REJECT
DOMAIN-SUFFIX,ads.mobclix.com,REJECT
DOMAIN-SUFFIX,adview.cn,REJECT
DOMAIN-SUFFIX,adwhirl.com,REJECT
DOMAIN-SUFFIX,adwo.com,REJECT
DOMAIN-SUFFIX,ad.unimhk.com,REJECT
DOMAIN-SUFFIX,aduu.cn,REJECT
DOMAIN-SUFFIX,advertising.com,REJECT
DOMAIN-SUFFIX,adxmi.com,REJECT
DOMAIN-SUFFIX,adzerk.net,REJECT
DOMAIN-SUFFIX,anquan.org,REJECT
DOMAIN-SUFFIX,appads.com,REJECT
DOMAIN-SUFFIX,applifier.com,REJECT
DOMAIN-SUFFIX,appsflyer.com,REJECT
DOMAIN-SUFFIX,baidustatic.com,REJECT
DOMAIN-SUFFIX,baifendian.com,REJECT
DOMAIN-SUFFIX,beacon.sina.com.cn,REJECT
DOMAIN-SUFFIX,cnzz.com,REJECT
DOMAIN-SUFFIX,domob.com.cn,REJECT
DOMAIN-SUFFIX,domob.org,REJECT
DOMAIN-SUFFIX,duomeng.cn,REJECT
DOMAIN-SUFFIX,duomeng.net,REJECT
DOMAIN-SUFFIX,duomeng.org,REJECT
DOMAIN-SUFFIX,googeadsserving.cn,REJECT
DOMAIN-SUFFIX,guomob.com,REJECT
DOMAIN-SUFFIX,inmobi.com,REJECT
DOMAIN-SUFFIX,immob.cn,REJECT
DOMAIN-SUFFIX,intely.cn,REJECT
DOMAIN-SUFFIX,kejet.net,REJECT
DOMAIN-SUFFIX,localytics.com,REJECT
DOMAIN-SUFFIX,mobads.baidu.com,REJECT
DOMAIN-SUFFIX,mobads-logs.baidu.com,REJECT
DOMAIN-SUFFIX,smartadserver.com,REJECT
DOMAIN-SUFFIX,tapjoyads.com,REJECT
DOMAIN-SUFFIX,m.simaba.taobao.com,REJECT
DOMAIN-SUFFIX,mmstat.com,REJECT
DOMAIN-SUFFIX,sax.sina.cn,REJECT
DOMAIN-SUFFIX,tanx.com,REJECT
DOMAIN-SUFFIX,tiqcdn.com,REJECT
DOMAIN-SUFFIX,umtrack.com,REJECT
DOMAIN-SUFFIX,umeng.co,REJECT
DOMAIN-SUFFIX,umeng.com,REJECT
DOMAIN-SUFFIX,umeng.net,REJECT
DOMAIN-SUFFIX,ushaqi.com,REJECT
DOMAIN-SUFFIX,uyunad.com,REJECT
DOMAIN-SUFFIX,waps.cn,REJECT
DOMAIN-SUFFIX,wiyun.com,REJECT
DOMAIN-SUFFIX,wooboo.com.cn,REJECT
DOMAIN-SUFFIX,wqmobile.com,REJECT
DOMAIN-SUFFIX,youmi.net,REJECT
DOMAIN-SUFFIX,zhiziyun.com,REJECT
DOMAIN-SUFFIX,data.vod.itc.cn,REJECT
DOMAIN-SUFFIX,atm.youku.com,REJECT
DOMAIN,ad.api.3g.youku.com,REJECT
DOMAIN,ad.api.3g.tudou.com,REJECT
DOMAIN,monitor.uu.qq.com,REJECT
DOMAIN,pingjs.qq.com,REJECT
DOMAIN,pingma.qq.com,REJECT
DOMAIN,tajs.qq.com,REJECT
DOMAIN-SUFFIX,pingtcss.qq.com,REJECT
DOMAIN-SUFFIX,report.qq.com,REJECT
DOMAIN,mi.gdt.qq.com,REJECT
DOMAIN,dsp.youdao.com,REJECT
DOMAIN,g.163.com,REJECT
DOMAIN,temp.163.com,REJECT
DOMAIN-SUFFIX,stat.ws.126.net,REJECT
DOMAIN-SUFFIX,analytics.126.net,DIRECT
DOMAIN-SUFFIX,union.youdao.com,REJECT
DOMAIN,msga.71.am,REJECT
DOMAIN-SUFFIX,miaozhen.com,REJECT
DOMAIN,cr-nielsen.com,REJECT
DOMAIN,cbjs.baidu.com,REJECT
DOMAIN,cpro.baidu.com,REJECT
DOMAIN,eclick.baidu.com,REJECT
DOMAIN,msg.71.am,REJECT
DOMAIN,mtj.baidu.com,REJECT
DOMAIN,nsclick.baidu.com,REJECT
DOMAIN-SUFFIX,pos.baidu.com,REJECT
DOMAIN-SUFFIX,baidu.com,DIRECT
IP-CIDR,60.210.17.12/24,REJECT
DOMAIN,acjs.aliyun.com,REJECT
DOMAIN,adash.m.taobao.com,REJECT
DOMAIN-SUFFIX,simaba.taobao.com,REJECT
DOMAIN-SUFFIX,taobao.com,DIRECT
DOMAIN-SUFFIX,alicdn.com,DIRECT
DOMAIN,ads.mopub.com,REJECT
DOMAIN,ark.letv.com,REJECT
DOMAIN,asimgs.pplive.cn,REJECT
DOMAIN,csi.gstatic.com,REJECT
DOMAIN,iadsdk.apple.com,REJECT
DOMAIN,pagead2.googlesyndication.com,REJECT
IP-CIDR,221.179.140.0/24,REJECT
DOMAIN-SUFFIX,www.panoramio.com,REJECT
DOMAIN-SUFFIX,qq.com,DIRECT
DOMAIN-KEYWORD,alipay,DIRECT
DOMAIN-KEYWORD,360buy,DIRECT
DOMAIN-SUFFIX,jd.com,DIRECT
DOMAIN-SUFFIX,126.net,DIRECT
DOMAIN-SUFFIX,163.com,DIRECT
DOMAIN-SUFFIX,amap.com,DIRECT
DOMAIN-SUFFIX,bdimg.com,DIRECT
DOMAIN-SUFFIX,bdstatic.com,DIRECT
DOMAIN-SUFFIX,cnbeta.com,DIRECT
DOMAIN-SUFFIX,douban.com,DIRECT
DOMAIN-SUFFIX,gtimg.com,DIRECT
DOMAIN-SUFFIX,hao123.com,DIRECT
DOMAIN-SUFFIX,haosou.com,DIRECT
DOMAIN-SUFFIX,ifeng.com,DIRECT
DOMAIN-SUFFIX,iqiyi.com,DIRECT
DOMAIN-SUFFIX,netease.com,DIRECT
DOMAIN-SUFFIX,qhimg.com,DIRECT
DOMAIN-SUFFIX,sogou.com,DIRECT
DOMAIN-SUFFIX,sohu.com,DIRECT
DOMAIN-SUFFIX,soso.com,DIRECT
DOMAIN-SUFFIX,suning.com,DIRECT
DOMAIN-SUFFIX,tmall.com,DIRECT
DOMAIN-SUFFIX,tudou.com,DIRECT
DOMAIN-SUFFIX,youku.com,DIRECT
DOMAIN-SUFFIX,xunlei.com,DIRECT
DOMAIN-SUFFIX,zhihu.com,DIRECT
DOMAIN-SUFFIX,ls.apple.com,DIRECT
DOMAIN-SUFFIX,weather.com,DIRECT
DOMAIN-SUFFIX,weibo.cn,DIRECT
DOMAIN-SUFFIX,weibo.com,DIRECT
DOMAIN-SUFFIX,sinaimg.cn,DIRECT
DOMAIN-SUFFIX,goodread.com,DIRECT
DOMAIN-KEYWORD,aka,PROXY
DOMAIN,me.com,PROXY
DOMAIN-SUFFIX,.me.com,PROXY
DOMAIN-SUFFIX,amazonaws.com,PROXY
DOMAIN-SUFFIX,android.com,PROXY
DOMAIN-SUFFIX,angularjs.org,PROXY
DOMAIN-SUFFIX,appspot.com,PROXY
DOMAIN-SUFFIX,akamaihd.net,PROXY,force-remote-dns
DOMAIN-SUFFIX,amazon.com,PROXY
DOMAIN-SUFFIX,bit.ly,PROXY
DOMAIN-SUFFIX,bitbucket.org,PROXY
DOMAIN-SUFFIX,blog.com,PROXY
DOMAIN-SUFFIX,blogcdn.com,PROXY
DOMAIN-SUFFIX,blogger.com,PROXY
DOMAIN-SUFFIX,blogsmithmedia.com,PROXY
DOMAIN-SUFFIX,box.net,PROXY
DOMAIN-SUFFIX,bloomberg.com,PROXY
DOMAIN-SUFFIX,chromium.org,PROXY
DOMAIN-SUFFIX,cl.ly,PROXY
DOMAIN-SUFFIX,cloudfront.net,PROXY
DOMAIN-SUFFIX,cloudflare.com,PROXY
DOMAIN-SUFFIX,cocoapods.org,PROXY
DOMAIN-SUFFIX,crashlytics.com,PROXY
DOMAIN-SUFFIX,dribbble.com,PROXY
DOMAIN-SUFFIX,dropbox.com,PROXY
DOMAIN-SUFFIX,dropboxstatic.com,PROXY
DOMAIN-SUFFIX,dropboxusercontent.com,PROXY
DOMAIN-SUFFIX,docker.com,PROXY
DOMAIN-SUFFIX,duckduckgo.com,PROXY
DOMAIN-SUFFIX,digicert.com,PROXY
DOMAIN-SUFFIX,dnsimple.com,PROXY
DOMAIN-SUFFIX,edgecastcdn.net,PROXY
DOMAIN-SUFFIX,engadget.com,PROXY
DOMAIN-SUFFIX,eurekavpt.com,PROXY
DOMAIN-SUFFIX,fb.me,PROXY
DOMAIN-SUFFIX,fbcdn.net,PROXY,force-remote-dns
DOMAIN-SUFFIX,fc2.com,PROXY
DOMAIN-SUFFIX,feedburner.com,PROXY
DOMAIN-SUFFIX,fabric.io,PROXY
DOMAIN-SUFFIX,flickr.com,PROXY
DOMAIN-SUFFIX,fastly.net,PROXY
DOMAIN-SUFFIX,ggpht.com,PROXY
DOMAIN-SUFFIX,github.com,PROXY
DOMAIN-SUFFIX,github.io,PROXY
DOMAIN-SUFFIX,githubusercontent.com,PROXY
DOMAIN-SUFFIX,golang.org,PROXY
DOMAIN-SUFFIX,goo.gl,PROXY
DOMAIN-SUFFIX,gstatic.com,PROXY
DOMAIN-SUFFIX,godaddy.com,PROXY
DOMAIN-SUFFIX,gravatar.com,PROXY
DOMAIN-SUFFIX,imageshack.us,PROXY
DOMAIN-SUFFIX,imgur.com,PROXY
DOMAIN-SUFFIX,jshint.com,PROXY
DOMAIN-SUFFIX,ift.tt,PROXY
DOMAIN-SUFFIX,j.mp,PROXY
DOMAIN-SUFFIX,kat.cr,PROXY
DOMAIN-SUFFIX,linode.com,PROXY
DOMAIN-SUFFIX,linkedin.com,PROXY
DOMAIN-SUFFIX,licdn.com,PROXY
DOMAIN-SUFFIX,lithium.com,PROXY
DOMAIN-SUFFIX,megaupload.com,PROXY
DOMAIN-SUFFIX,mobile01.com,PROXY
DOMAIN-SUFFIX,modmyi.com,PROXY
DOMAIN-SUFFIX,nytimes.com,PROXY
DOMAIN-SUFFIX,name.com,PROXY
DOMAIN-SUFFIX,openvpn.net,PROXY
DOMAIN-SUFFIX,openwrt.org,PROXY
DOMAIN-SUFFIX,ow.ly,PROXY
DOMAIN-SUFFIX,pinboard.in,PROXY
DOMAIN-SUFFIX,ssl-images-amazon.com,PROXY
DOMAIN-SUFFIX,sstatic.net,PROXY
DOMAIN-SUFFIX,stackoverflow.com,PROXY
DOMAIN-SUFFIX,staticflickr.com,PROXY
DOMAIN-SUFFIX,squarespace.com,PROXY
DOMAIN-SUFFIX,symcd.com,PROXY
DOMAIN-SUFFIX,symcb.com,PROXY
DOMAIN-SUFFIX,symauth.com,PROXY
DOMAIN-SUFFIX,ubnt.com,PROXY
DOMAIN-SUFFIX,thepiratebay.org,PROXY
DOMAIN-SUFFIX,tumblr.com,PROXY
DOMAIN-SUFFIX,twitch.tv,PROXY
DOMAIN-SUFFIX,twitter.com,PROXY,force-remote-dns
DOMAIN-SUFFIX,wikipedia.com,PROXY
DOMAIN-SUFFIX,wikipedia.org,PROXY
DOMAIN-SUFFIX,wikimedia.org,PROXY
DOMAIN-SUFFIX,wordpress.com,PROXY
DOMAIN-SUFFIX,wsj.com,PROXY
DOMAIN-SUFFIX,wsj.net,PROXY
DOMAIN-SUFFIX,wp.com,PROXY
DOMAIN-SUFFIX,vimeo.com,PROXY
DOMAIN-SUFFIX,youtu.be,PROXY
DOMAIN-SUFFIX,ytimg.com,PROXY
DOMAIN-KEYWORD,blogspot,PROXY
DOMAIN-SUFFIX,tapbots.com,PROXY
DOMAIN-SUFFIX,ykimg.com,DIRECT
DOMAIN-SUFFIX,medium.com,PROXY
DOMAIN-SUFFIX,fast.com,PROXY
DOMAIN-SUFFIX,nflxvideo.net,PROXY
DOMAIN-SUFFIX,clashroyaleapp.com,DIRECT
DOMAIN-SUFFIX,bilibili.com,DIRECT
DOMAIN-SUFFIX,bilibili.cn,DIRECT
DOMAIN-SUFFIX,acgvideo.com,DIRECT
DOMAIN-SUFFIX,jianshu.com,DIRECT
DOMAIN-SUFFIX,jianshu.io,DIRECT
DOMAIN-SUFFIX,jianshuapi.com,DIRECT
DOMAIN-SUFFIX,soundcloud.com,PROXY
DOMAIN-SUFFIX,sndcdn.com,PROXY
DOMAIN-SUFFIX,outlook.com,DIRECT
IP-CIDR,91.108.56.0/22,PROXY,no-resolve
IP-CIDR,91.108.4.0/22,PROXY,no-resolve
IP-CIDR,109.239.140.0/24,PROXY,no-resolve
IP-CIDR,149.154.160.0/20,PROXY,no-resolve
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT
GEOIP,CN,DIRECT
FINAL,PROXY

[Host]
localhost = 127.0.0.1

[URL Rewrite]
^https://m-api.nexon.com/sdk/enterToy.nx  direct script-filter
^http://(www.)?g.cn https://www.google.com 302
^http://(www.)?google.cn https://www.google.com 302
^http://reject.example.com reject 


[Filter]
script = LyoKICogdGVzdCBmaWx0ZXIgYXBpCiAqIEBhdXRob3IgTGkgR3VhbmdtaW5nCiAqLwoKY29uc3QgbG9jYWxTdG9yYWdlID0ge307CgpmdW5jdGlvbiB0ZXN0RmlsdGVyUmVzcG9uc2UoYXJncykgewogICAgaWYgKCFsb2NhbFN0b3JhZ2VbYXJncy51dWlkXSkgewogICAgICAgIGxvY2FsU3RvcmFnZVthcmdzLnV1aWRdID0ge307CiAgICB9CgogICAgdmFyIHBhcnNlciA9IGxvY2FsU3RvcmFnZVthcmdzLnV1aWRdW2FyZ3MudHlwZV07CgogICAgaWYgKHBhcnNlcikgewogICAgICAgIHJldHVybiBwYXJzZXIuZXhlY3V0ZShhcmdzLmRhdGEpOwogICAgfQoKICAgIHBhcnNlciA9IGxvY2FsU3RvcmFnZVthcmdzLnV1aWRdW2FyZ3MudHlwZV0gPSBuZXcgSFRUUFBhcnNlcihhcmdzLnR5cGUpOwoKICAgIGlmIChhcmdzLnR5cGUgPT0gJ1JFUVVFU1QnKSB7CiAgICAgICAgcGFyc2VyLm9uSGVhZGVyc0NvbXBsZXRlID0gZnVuY3Rpb24oaW5mbykgewogICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtpbmZvLm1ldGhvZCArICcgJyArIGluZm8udXJsICsgJyBIVFRQLzEuMCddOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZm8uaGVhZGVycy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IGluZm8uaGVhZGVyc1tpXS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgaWYgKGtleSA9PSAnY29udGVudC1lbmNvZGluZycpIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnB1c2goaW5mby5oZWFkZXJzW2ldICsgJzogaWRlbnRpdHknKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09ICdhY2NlcHQtZW5jb2RpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wdXNoKGluZm8uaGVhZGVyc1tpXSArICc6IGlkZW50aXR5Jyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGluZm8uaGVhZGVyc1tpICsgMV07CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wdXNoKGluZm8uaGVhZGVyc1tpXSArICc6ICcgKyB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGhlYWRlciA9IGhlYWRlcnMuam9pbignXHJcbicpICsgJ1xyXG5cclxuJzsKICAgICAgICAgICAgaWYgKHRoaXMub2Zmc2V0IDwgdGhpcy5lbmQpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2h1bmsgPSBoZWFkZXIgKyB0aGlzLmNodW5rLnN1YnN0cmluZyh0aGlzLm9mZnNldCwgdGhpcy5lbmQpOwogICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSBoZWFkZXIubGVuZ3RoOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IGhlYWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc2tpcCBib2R5IHBhcnNlCiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBwYXJzZXIub25IZWFkZXJzQ29tcGxldGUgPSBmdW5jdGlvbihpbmZvKSB7CiAgICAgICAgICAgIHZhciByZXNwb25zZV9saW5lID0gJ0hUVFAvJyArIGluZm8udmVyc2lvbk1ham9yICsgJy4nICsgaW5mby52ZXJzaW9uTWlub3IgKyAnICcgKyBpbmZvLnN0YXR1c0NvZGU7CiAgICAgICAgICAgIGlmIChpbmZvLnN0YXR1c01lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlX2xpbmUgKz0gJyAnICsgaW5mby5zdGF0dXNNZXNzYWdlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmNodW5rZWQgPSBmYWxzZTsKCiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW3Jlc3BvbnNlX2xpbmVdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZm8uaGVhZGVycy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IGluZm8uaGVhZGVyc1tpXS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvbnRlbnQtbGVuZ3RoJyB8fCBrZXkgPT09ICd0cmFuc2Zlci1lbmNvZGluZycpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucHVzaCgnVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5mby5oZWFkZXJzW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnB1c2goaW5mby5oZWFkZXJzW2ldICsgJzogJyArIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGhlYWRlciA9IGhlYWRlcnMuam9pbignXHJcbicpICsgJ1xyXG5cclxuJzsKCiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldCA8IHRoaXMuZW5kKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNodW5rID0gaGVhZGVyICsgdGhpcy5jaHVuay5zdWJzdHJpbmcodGhpcy5vZmZzZXQsIHRoaXMuZW5kKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY2h1bmsgPSBoZWFkZXI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuZW5kID0gdGhpcy5jaHVuay5sZW5ndGg7CiAgICAgICAgICAgIHRoaXMub2Zmc2V0ID0gaGVhZGVyLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIHBhcnNlci5vbkJvZHkgPSBmdW5jdGlvbihjaHVuaywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgICAgICAgLyogVE9ETzogc3RyZWFtIHJlcGxhY2UgKi8KICAgICAgICAgICAgdmFyIGV4dHJhID0gY2h1bmsuc3Vic3RyaW5nKG9mZnNldCArIGxlbmd0aCArICh0aGlzLmlzQ2h1bmtlZCA/IDIgOiAwKSkgfHwgIiI7CgogICAgICAgICAgICBpZiAodGhpcy5pc0NodW5rZWQpIHsKICAgICAgICAgICAgICAgIHZhciBzaXplID0gbGVuZ3RoLnRvU3RyaW5nKDE2KS5sZW5ndGggKyAyOwogICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5zdWJzdHIoMCwgb2Zmc2V0IC0gc2l6ZSkgKyBjaHVuay5zdWJzdHJpbmcob2Zmc2V0LCB0aGlzLmVuZCk7CiAgICAgICAgICAgICAgICBvZmZzZXQgLT0gc2l6ZTsKICAgICAgICAgICAgICAgIHRoaXMuZW5kIC09IHNpemU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBjaHVuay5zdWJzdHIoMCwgb2Zmc2V0KTsKICAgICAgICAgICAgdmFyIGJvZHkgPSBjaHVuay5zdWJzdHIob2Zmc2V0LCBsZW5ndGgpLnJlcGxhY2UoIi05IiwgJzAnKTsKCiAgICAgICAgICAgIGlmICh0aGlzLmNodW5rZWQpIHsKICAgICAgICAgICAgICAgIHZhciBzaXplID0gYm9keS5sZW5ndGgudG9TdHJpbmcoMTYpOwogICAgICAgICAgICAgICAgY2h1bmsgPSBoZWFkZXIgKyBzaXplICsgJ1xyXG4nICsgYm9keSArICdcclxuJyArIGV4dHJhOwogICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQgKyBzaXplLmxlbmd0aCArIDQgKyBib2R5Lmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2h1bmtlZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keV9ieXRlcyA9IGJvZHkubGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2h1bmsgPSBoZWFkZXIgKyBib2R5ICsgZXh0cmE7CiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldCArIGJvZHkubGVuZ3RoOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmNodW5rID0gY2h1bms7CiAgICAgICAgICAgIHRoaXMuZW5kID0gY2h1bmsubGVuZ3RoOwogICAgICAgIH07CgogICAgICAgIHBhcnNlci5vbk1lc3NhZ2VDb21wbGV0ZSA9IGZ1bmN0aW9uKGluZm8pIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmtlZCkgewogICAgICAgICAgICAgICAgdGhpcy5jaHVuayArPSAnMFxyXG5cclxuJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcGFyc2VyLmV4ZWN1dGUoYXJncy5kYXRhKTsKfQoKLyoqCiAqIEZpbHRlciBIVFRQIHJlcXVlc3QgYW5kIHJlc3BvbnNlLgogKiBAcGFyYW0ge29iamVjdH06IGFyZ3VtZW50cwogKiAgICAgICAgICAgICAgICAgIGFyZ3MudHlwZTogICAgICBSRVFVRVNUIG9yIFJFU1BPTlNFCiAqICAgICAgICAgICAgICAgICAgYXJncy51dWlkOiAgICAgIGh0dHAgcmVxdWVzdCBVVUlECiAqICAgICAgICAgICAgICAgICAgYXJncy51cmw6ICAgICAgIGh0dHAgcmVxdWVzdCB1cmwKICogICAgICAgICAgICAgICAgICBhcmdzLmRhdGE6ICAgICAgaHR0cCByYXcgZGF0YQogKiAgICAgICAgICAgICAgICAgIGFyZ3MucmVzcG9uc2U6ICBmdW5jdGlvbihkYXRhKXt9CiAqICAgICAgICAgICAgICAgICAgYXJncy5lbmNvZGluZzogIDE6YXNjaWkgb3IgNDp1dGYtOAogKiBAcmV0dXJucyB7c3RyaW5nfGJvb2xlYW58dW5kZWZpbmVkfG51bGx9IHN0cmluZzogcmV0dXJuIG1vZGlmaWVkIGRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbjogY2xvc2UgY29ubmVjdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ6IGRvIG5vdCBtb2RpZnkgZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsOiBxdWl0IHNjcmlwdCBmaWx0ZXIKICovCmZ1bmN0aW9uIHNjcmlwdEZpbHRlckV4ZWN1dGUoYXJncykgewogICAgY29uc29sZS5sb2coJ2ZpbHRlciAnICsgYXJncy51dWlkKTsKICAgIGNvbnNvbGUubG9nKCd1cmwgJyArIGFyZ3MudXJsKTsKICAgIGlmIChhcmdzLnVybC5pbmRleE9mKCdiYWlkdS5jb20vcm9ib3RzLnR4dCcpICE9PSAtMSkgewogICAgICAgIHZhciByZXN1bHQgPSB0ZXN0RmlsdGVyUmVzcG9uc2UoYXJncyk7CiAgICAgICAgaWYgKHJlc3VsdC5jaHVuaykgewogICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNodW5rOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0KCi8qCiAqIFJlbGVhc2UgZmlsdGVyIHZhbHVlcy4KICogQHBhcmFtIHtzdHJpbmd9OiBodHRwIHJlcXVlc3QgVVVJRAogKi8KZnVuY3Rpb24gc2NyaXB0RmlsdGVyRnJlZSh1dWlkKSB7CiAgICBjb25zb2xlLmxvZygnZnJlZSAnICsgdXVpZCk7CiAgICBkZWxldGUgbG9jYWxTdG9yYWdlW3V1aWRdOwp9
enable = true

[MITM]
hostname = m-api.nexon.com


